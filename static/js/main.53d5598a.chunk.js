(this.webpackJsonpreversi=this.webpackJsonpreversi||[]).push([[0],{28:function(e,t,a){},46:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var r=a(8),i=a.n(r),s=a(39),n=a.n(s),c=(a(46),a(28),a(0)),o=a.n(c),u=a(3),l=a(11),h=a(40),b=a.n(h),d=a(4),f=a(1),v=a(2);function j(e){return new Promise((function(t){return setTimeout(t,e)}))}var p,m=function(){function e(){Object(f.a)(this,e),this.board=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,2,1,0,0,0],[0,0,0,1,2,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],this.subscribers=[],this.numBlack=2,this.numWhite=2,this.nextPlayer=2,this.switchStatus=!0,this.mode="computer",this.legal=!0,this.isBusy=!1,this.weight=[[500,-25,10,5,5,10,-25,500],[-25,-45,1,1,1,1,-45,-25],[10,1,3,2,2,3,1,10],[5,1,2,1,1,2,1,5],[5,1,2,1,1,2,1,5],[10,1,3,2,2,3,1,10],[-25,-45,1,1,1,1,-45,-25],[500,-25,10,5,5,10,-25,500]],this.showLegalMoves()}return Object(v.a)(e,[{key:"setMode",value:function(e){this.mode=e}},{key:"getLegalStatus",value:function(){return this.legal}},{key:"getComputerMove",value:function(){for(var e=0;e<8;e++)for(var t=0;t<8;t++)if(this.isValidMove(e,t,this.nextPlayer))return{computer_i:e,computer_j:t}}},{key:"setSwitchStatus",value:function(e){this.switchStatus=e}},{key:"setLegal",value:function(e){this.legal=e}},{key:"resetBoard",value:function(){this.board=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,2,1,0,0,0],[0,0,0,1,2,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],this.numBlack=2,this.numWhite=2,this.nextPlayer=2,this.legal=!0,this.isBusy=!1,this.switchStatus?this.showLegalMoves():this.updataSubscribers()}},{key:"subscribeToUpdates",value:function(e){this.subscribers.push(e)}},{key:"updataSubscribers",value:function(){var e,t=Object(d.a)(this.subscribers);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(a){t.e(a)}finally{t.f()}}},{key:"getRowColByKey",value:function(e){var t=e%10-1;return{i:parseInt(e%100/10)-1,j:t}}},{key:"placePiece",value:function(e,t,a){this.board[e][t]=a,this.setLegal(!0)}},{key:"updateNextPlayer",value:function(){var e=2===this.nextPlayer?1:2;this.nextPlayer=this.hasLegalMove(e)?e:this.nextPlayer}},{key:"addPiece",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var a,r,i,s,n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isBusy){e.next=2;break}return e.abrupt("return");case 2:if(this.isBusy=!0,this.clearLegalMoves(),a=this.getRowColByKey(t),r=a.i,i=a.j,this.isValidMove(r,i,this.nextPlayer)){e.next=11;break}return this.setLegal(!1),this.switchStatus&&this.showLegalMoves(),this.updataSubscribers(),this.isBusy=!1,e.abrupt("return");case 11:return this.placePiece(r,i,this.nextPlayer),this.updateNumPieces(),this.updataSubscribers(),e.next=16,j(500);case 16:if(this.flipPieces(r,i),this.updateNumPieces(),this.updateNextPlayer(),this.updataSubscribers(),this.checkWin()){e.next=34;break}if("computer"!==this.mode){e.next=34;break}return this.clearLegalMoves(),s=this.getComputerMove(),n=s.computer_i,c=s.computer_j,e.next=26,j(1e3);case 26:return this.placePiece(n,c,this.nextPlayer),this.updateNumPieces(),this.updataSubscribers(),e.next=31,j(500);case 31:this.flipPieces(n,c),this.updateNumPieces(),this.updateNextPlayer();case 34:this.switchStatus?this.showLegalMoves():this.updataSubscribers(),this.isBusy=!1;case 36:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showLegalMoves",value:function(){for(var e=0;e<8;e++)for(var t=0;t<8;t++)this.isValidMove(e,t,this.nextPlayer)&&(this.board[e][t]=.5);this.updataSubscribers()}},{key:"clearLegalMoves",value:function(){for(var e=0;e<8;e++)for(var t=0;t<8;t++).5===this.board[e][t]&&(this.board[e][t]=0);this.updataSubscribers()}},{key:"getWinner",value:function(){return this.numBlack>this.numWhite?2:1}},{key:"checkWin",value:function(){return this.hasLegalMove(1)||this.hasLegalMove(2)?0:(this.isBusy=!0,this.getWinner())}},{key:"getNextPlayer",value:function(){return this.nextPlayer}},{key:"getBoardArray",value:function(){return this.board}},{key:"updateNumPieces",value:function(){for(var e=0,t=0,a=0;a<8;a++)for(var r=0;r<8;r++)2===this.board[a][r]?e++:1===this.board[a][r]&&t++;this.numBlack=e,this.numWhite=t}},{key:"getNumPieces",value:function(e){return 2===e?this.numBlack:this.numWhite}},{key:"hasLegalMove",value:function(e){for(var t=0;t<8;t++)for(var a=0;a<8;a++)if(this.isValidMove(t,a,e))return!0;return!1}},{key:"checkVertically",value:function(e,t,a,r){for(var i=e+1;i<t;i++)if(0===this.board[i][a]||.5===this.board[i][a]||this.board[i][a]===r)return!1;return!0}},{key:"checkHorizontally",value:function(e,t,a,r){for(var i=e+1;i<t;i++)if(0===this.board[a][i]||.5===this.board[a][i]||this.board[a][i]===r)return!1;return!0}},{key:"checkDiagonallyBottomRight",value:function(e,t,a,r){for(var i=e+1;i<t;i++){var s=a+i-e;if(0===this.board[i][s]||.5===this.board[i][s]||this.board[i][s]===r)return!1}return!0}},{key:"checkDiagonallyBottomLeft",value:function(e,t,a,r){for(var i=e+1;i<t;i++){var s=a-i+e;if(0===this.board[i][s]||.5===this.board[i][s]||this.board[i][s]===r)return!1}return!0}},{key:"flipVertically",value:function(e,t,a){for(var r=e+1;r<t;r++)this.board[r][a]=this.board[e][a]}},{key:"flipHorizontally",value:function(e,t,a){for(var r=e+1;r<t;r++)this.board[a][r]=this.board[a][e]}},{key:"flipDiagonallyBottomRight",value:function(e,t,a){for(var r=e+1;r<t;r++){var i=a+r-e;this.board[r][i]=this.board[e][a]}}},{key:"flipDiagonallyBottomLeft",value:function(e,t,a){for(var r=e+1;r<t;r++){var i=a-r+e;this.board[r][i]=this.board[e][a]}}},{key:"isValidMove",value:function(e,t,a){if(1===this.board[e][t]||2===this.board[e][t])return!1;for(var r=e-2;r>=0;r--)if(this.board[r][t]===a&&this.checkVertically(r,e,t,a))return!0;for(var i=e+2;i<8;i++)if(this.board[i][t]===a&&this.checkVertically(e,i,t,a))return!0;for(var s=t-2;s>=0;s--)if(this.board[e][s]===a&&this.checkHorizontally(s,t,e,a))return!0;for(var n=t+2;n<8;n++)if(this.board[e][n]===a&&this.checkHorizontally(t,n,e,a))return!0;for(var c=e-2;c>=0;c--){var o=t-e+c;if(o>=0&&this.board[c][o]===a&&this.checkDiagonallyBottomRight(c,e,o,a))return!0}for(var u=e-2;u>=0;u--){var l=t+e-u;if(l<8&&this.board[u][l]===a&&this.checkDiagonallyBottomLeft(u,e,l,a))return!0}for(var h=e+2;h<8;h++){var b=t-h+e;if(b>=0&&this.board[h][b]===a&&this.checkDiagonallyBottomLeft(e,h,t,a))return!0}for(var d=e+2;d<8;d++){var f=t+d-e;if(f<8&&this.board[d][f]===a&&this.checkDiagonallyBottomRight(e,d,t,a))return!0}return!1}},{key:"flipPieces",value:function(e,t){for(var a=this.board[e][t],r=e-1;r>=0;r--)this.board[r][t]===a&&this.checkVertically(r,e,t,a)&&this.flipVertically(r,e,t);for(var i=e+1;i<8;i++)this.board[i][t]===a&&this.checkVertically(e,i,t,a)&&this.flipVertically(e,i,t);for(var s=t-1;s>=0;s--)this.board[e][s]===a&&this.checkHorizontally(s,t,e,a)&&this.flipHorizontally(s,t,e);for(var n=t+1;n<8;n++)this.board[e][n]===a&&this.checkHorizontally(t,n,e,a)&&this.flipHorizontally(t,n,e);for(var c=e-1;c>=0;c--){var o=t-e+c;o>=0&&this.board[c][o]===a&&this.checkDiagonallyBottomRight(c,e,o,a)&&this.flipDiagonallyBottomRight(c,e,o)}for(var u=e-1;u>=0;u--){var l=t+e-u;l<8&&this.board[u][l]===a&&this.checkDiagonallyBottomLeft(u,e,l,a)&&this.flipDiagonallyBottomLeft(u,e,l)}for(var h=e+1;h<8;h++){var b=t-h+e;b>=0&&this.board[h][b]===a&&this.checkDiagonallyBottomLeft(e,h,t,a)&&this.flipDiagonallyBottomLeft(e,h,t)}for(var d=e+1;d<8;d++){var f=t+d-e;f<8&&this.board[d][f]===a&&this.checkDiagonallyBottomRight(e,d,t,a)&&this.flipDiagonallyBottomRight(e,d,t)}}}]),e}();var y,k=a(35),g=a(23);0==Object(k.a)().length&&(y=Object(k.b)({apiKey:"AIzaSyA0SVlli6rx1wYyXKiYXH0MgwiVWHfQk-c",authDomain:"edu-umich-zzhiyuan-reversi.firebaseapp.com",projectId:"edu-umich-zzhiyuan-reversi",storageBucket:"edu-umich-zzhiyuan-reversi.appspot.com",messagingSenderId:"868073070089",appId:"1:868073070089:web:cd65df734b7834b1c3a2d8"}));var x,O=Object(g.d)(y,{useFetchStreams:!1}),S=function(){function e(){var t=this;Object(f.a)(this,e),this.asyncInit=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadLeaders();case 2:case"end":return e.stop()}}),e)}))),this.loadLeaders=Object(u.a)(o.a.mark((function e(){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(g.f)(t.collRef,Object(g.e)(10)),e.next=3,Object(g.c)(a);case 3:if(!(r=e.sent).empty){e.next=6;break}return e.abrupt("return");case 6:r.docs.forEach((function(e){var a=e.id,r=e.data();r.key=a,t.leaders.push(r)})),t.updateSubscribers();case 8:case"end":return e.stop()}}),e)}))),this.addItem=function(){var e=Object(u.a)(o.a.mark((function e(a,r){var i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={name:a,score:r},e.next=3,Object(g.a)(t.collRef,i);case 3:s=e.sent,i.key=s.id,t.leaders.push(i),t.updateSubscribers();case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.collRef=Object(g.b)(O,"leaderboard"),this.leaders=[],this.subscribers=[],this.asyncInit()}return Object(v.a)(e,[{key:"subscribeToUpdates",value:function(e){this.subscribers.push(e)}},{key:"updateSubscribers",value:function(){var e,t=Object(d.a)(this.subscribers);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(a){t.e(a)}finally{t.f()}}},{key:"getLeadersCopy",value:function(){return this.leaders.sort((function(e,t){return t.score-e.score})),Array.from(this.leaders)}}]),e}();var w=a(5);var B=function(e){var t=e.number,a=e.piece,r=e.onPress;return Object(w.jsx)("div",{className:"tile "+(t%2===1?"tile-black":"tile-white"),onClick:r,children:Object(w.jsx)("div",{className:0===a?"":2===a?"piece piece-black":1===a?"piece piece-white":"potential "+(t%2===1?"potential-black":"potential-white")})})},N=a(56),P=a(57);a(38);var L=function(e){var t=e.mode,a=e.winner,i=e.score,s=e.onClose,n=e.onStart,c=e.onSubmit,o=Object(r.useState)(""),u=Object(l.a)(o,2),h=u[0],b=u[1],d=Object(r.useState)(!1),f=Object(l.a)(d,2),v=f[0],j=f[1];return Object(w.jsx)("div",{className:"modal-background",children:Object(w.jsxs)("div",{className:"content-box",children:[Object(w.jsx)("span",{className:"close",onClick:s,children:"\xd7"}),"multiplayer"===t?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("p",{className:"congrats",children:[2===a?"Black":"White"," won! "]}),Object(w.jsx)("button",{type:"button",onClick:n,className:"btn btn-outline-dark",children:"Start a new game! "})]}):Object(w.jsx)(w.Fragment,{children:2===a?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("p",{className:"congrats special-congrats",children:"You won! "}),Object(w.jsxs)(N.a,{id:"submit-name",children:[Object(w.jsx)(P.a,{type:"text",placeholder:"Enter your name",value:h,maxLength:10,onChange:function(e){b(e.target.value)}}),Object(w.jsx)("button",{disabled:v,type:"button",className:"btn btn-outline-dark",onClick:function(){c(h,i),j(!0)},children:"Submit"})]}),Object(w.jsx)("button",{type:"button",onClick:n,className:"btn btn-outline-dark",children:"Start a new game! "})]}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("p",{className:"congrats",children:"Good game! "}),Object(w.jsx)("button",{type:"button",onClick:n,className:"btn btn-outline-dark",children:"Start a new game! "})]})})]})})};function M(e){var t=e.name,a=e.score;return Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{className:"player-name",children:Object(w.jsx)("span",{className:"player-name-span",children:t})}),Object(w.jsx)("td",{children:a})]})}var C=function(){var e=(p||(p=new m),p),t=(x||(x=new S),x),a=e.getBoardArray(),i=Object(r.useState)(t.getLeadersCopy()),s=Object(l.a)(i,2),n=s[0],c=s[1],h=Object(r.useState)(!1),d=Object(l.a)(h,2),f=d[0],v=d[1],j=Object(r.useState)("Black"),y=Object(l.a)(j,2),k=y[0],g=y[1],O=Object(r.useState)(2),N=Object(l.a)(O,2),P=N[0],C=N[1],D=Object(r.useState)(2),R=Object(l.a)(D,2),V=R[0],z=R[1],I=Object(r.useState)(!0),W=Object(l.a)(I,2),F=W[0],H=W[1],T=Object(r.useState)(!0),A=Object(l.a)(T,2),E=A[0],K=A[1],U=Object(r.useState)("computer"),Y=Object(l.a)(U,2),_=Y[0],G=Y[1];function J(t){for(var a=[],r=function(r){for(var i=function(i){a.push(Object(w.jsx)(B,{number:r+i+2,piece:t[r][i],onPress:Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.addPiece(10*(r+1)+(i+1));case 2:e.checkWin()&&v(!0);case 3:case"end":return t.stop()}}),t)})))},10*(r+1)+(i+1)))},s=0;s<8;s++)i(s)},i=0;i<8;i++)r(i);return a}var X=Object(r.useState)(J(a)),q=Object(l.a)(X,2),Q=q[0],Z=q[1];function $(){v(!1)}function ee(){e.resetBoard(F),e.setMode("computer"),G("computer")}function te(){e.resetBoard(F),e.setMode("multiplayer"),G("multiplayer")}return Object(r.useEffect)((function(){e.subscribeToUpdates((function(){Z(J(e.getBoardArray())),C(e.getNumPieces(2)),z(e.getNumPieces(1)),K(e.getLegalStatus()),2===e.getNextPlayer()?g("Black"):1===e.getNextPlayer()&&g("White")})),t.subscribeToUpdates((function(){c(t.getLeadersCopy())}))}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{className:"control",children:Object(w.jsxs)("div",{className:"menu",children:[Object(w.jsx)("button",{type:"button",className:"btn btn-outline-dark",onClick:ee,children:Object(w.jsx)("span",{className:"btn-text",children:"New Game"})}),Object(w.jsx)("button",{type:"button",className:"btn btn-outline-dark",onClick:te,children:Object(w.jsx)("span",{className:"btn-text",children:"Multiplayer"})}),Object(w.jsxs)("div",{className:"switch",children:[Object(w.jsx)("div",{children:Object(w.jsx)("span",{className:"btn-text",children:"Show legal moves"})}),Object(w.jsx)(b.a,{onChange:function(t){H(t),e.setSwitchStatus(t),t?e.showLegalMoves():e.clearLegalMoves()},checked:F,onColor:"#292C6D",boxShadow:"0 0 0.3em #292C6D",uncheckedIcon:!1,checkedIcon:!1,activeBoxShadow:null})]})]})}),Object(w.jsxs)("div",{id:"score-board",children:[Object(w.jsx)("div",{className:"piece piece-black",children:P}),Object(w.jsxs)("div",{className:"info-box",children:[Object(w.jsx)("p",{id:"turn",children:"multiplayer"===_?"".concat(k,"'s turn"):"Black"===k?"Your turn":"Not your turn"}),Object(w.jsx)("p",{id:"warning",children:E?"":"Sorry, this square is not a valid move."})]}),Object(w.jsx)("div",{className:"piece piece-white",children:V})]}),f?Object(w.jsx)(L,{mode:_,winner:e.getWinner(),score:Math.max(P,V),onClose:$,onSubmit:function(e,a){return t.addItem(e,a)},onStart:function(){"computer"===_?ee():"multiplayer"===_&&te(),$()}}):null,Object(w.jsx)("div",{id:"board",children:Q}),Object(w.jsxs)("div",{id:"leaderboard",children:[Object(w.jsx)("h2",{children:"Leaderboard"}),Object(w.jsxs)("table",{children:[Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Name"}),Object(w.jsx)("th",{children:"Score"})]}),n.map((function(e){return Object(w.jsx)(M,{name:e.name,score:e.score},e.key)}))]})]})]})};var D=function(){return document.title="Reversi | SI 579 Final Project",Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("header",{children:Object(w.jsx)("h1",{children:"REVERSI"})}),Object(w.jsx)("main",{children:Object(w.jsx)(C,{})})]})},R=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,58)).then((function(t){var a=t.getCLS,r=t.getFID,i=t.getFCP,s=t.getLCP,n=t.getTTFB;a(e),r(e),i(e),s(e),n(e)}))};n.a.render(Object(w.jsx)(i.a.StrictMode,{children:Object(w.jsx)(D,{})}),document.getElementById("root")),R()}},[[54,1,2]]]);
//# sourceMappingURL=main.53d5598a.chunk.js.map